/*
 * SearchSupplierDialog.java
 *
 * Created on 2007/04/17, 12:13
 */

package com.geobeck.sosia.pos.search.commodity;

import java.awt.*;
import java.sql.*;
import java.util.*;
import java.util.logging.*;
import javax.swing.*;
import javax.swing.table.*;
import javax.swing.text.*;

import com.geobeck.swing.*;
import com.geobeck.sql.*;
import com.geobeck.sosia.pos.master.commodity.*;
import com.geobeck.sosia.pos.master.product.*;
import com.geobeck.sosia.pos.swing.*;
import com.geobeck.sosia.pos.system.*;

/**
 *
 * @author  katagiri
 */
public class SearchSupplierDialog extends javax.swing.JDialog
{
	
	/** Creates new form SearchSupplierDialog */
	public SearchSupplierDialog(java.awt.Frame parent, boolean modal)
	{
		super(parent, modal);
		initComponents();
		this.init();
	}
	
	/** This method is called from within the constructor to
	 * initialize the form.
	 * WARNING: Do NOT modify this code. The content of this method is
	 * always regenerated by the Form Editor.
	 */
    // <editor-fold defaultstate="collapsed" desc=" Generated Code">//GEN-BEGIN:initComponents
    private void initComponents()
    {
        purchaseGroup = new javax.swing.ButtonGroup();
        imagePanel1 = new com.geobeck.swing.ImagePanel();
        jPanel1 = new javax.swing.JPanel();
        supplierName = new com.geobeck.swing.JFormattedTextFieldEx();
        jLabel1 = new javax.swing.JLabel();
        trustPurchase = new javax.swing.JRadioButton();
        cashPurchase = new javax.swing.JRadioButton();
        jLabel11 = new javax.swing.JLabel();
        jLabel4 = new javax.swing.JLabel();
        prefecture = new com.geobeck.sosia.pos.swing.JComboBoxLabel();
        phoneNumber = new com.geobeck.swing.JFormattedTextFieldEx();
        ((PlainDocument)phoneNumber.getDocument()).setDocumentFilter(
            new CustomFilter(20, CustomFilter.PHONE_NUMBER));
        jLabel5 = new javax.swing.JLabel();
        allPurchase = new javax.swing.JRadioButton();
        jLabel2 = new javax.swing.JLabel();
        supplierNoFrom = new com.geobeck.swing.JFormattedTextFieldEx();
        ((PlainDocument)supplierNoFrom.getDocument()).setDocumentFilter(new CustomFilter(4, CustomFilter.NUMERIC));
        jLabel3 = new javax.swing.JLabel();
        supplierNoTo = new com.geobeck.swing.JFormattedTextFieldEx();
        ((PlainDocument)supplierNoTo.getDocument()).setDocumentFilter(new CustomFilter(4, CustomFilter.NUMERIC));
        jPanel2 = new javax.swing.JPanel();
        itemClass = new javax.swing.JComboBox();
        jLabel6 = new javax.swing.JLabel();
        item = new javax.swing.JComboBox();
        jScrollPane1 = new javax.swing.JScrollPane();
        supplierTable = new javax.swing.JTable();
        jPanel3 = new javax.swing.JPanel();
        searchButton = new javax.swing.JButton();
        selectButton = new javax.swing.JButton();
        backButton = new javax.swing.JButton();

        setDefaultCloseOperation(javax.swing.WindowConstants.DISPOSE_ON_CLOSE);
        jPanel1.setOpaque(false);
        supplierName.setBorder(javax.swing.BorderFactory.createLineBorder(new java.awt.Color(204, 204, 204)));
        supplierName.setInputKanji(true);

        jLabel1.setText("\u4ed5\u5165\u5148\u540d");

        purchaseGroup.add(trustPurchase);
        trustPurchase.setText("\u639b\u4ed5\u5165");
        trustPurchase.setBorder(javax.swing.BorderFactory.createEmptyBorder(0, 0, 0, 0));
        trustPurchase.setMargin(new java.awt.Insets(0, 0, 0, 0));

        purchaseGroup.add(cashPurchase);
        cashPurchase.setText("\u73fe\u91d1\u4ed5\u5165");
        cashPurchase.setBorder(javax.swing.BorderFactory.createEmptyBorder(0, 0, 0, 0));
        cashPurchase.setMargin(new java.awt.Insets(0, 0, 0, 0));

        jLabel11.setText("\u4ed5\u5165\u533a\u5206");

        jLabel4.setText("\u90fd\u9053\u5e9c\u770c");

        prefecture.setBorder(javax.swing.BorderFactory.createLineBorder(new java.awt.Color(204, 204, 204)));

        phoneNumber.setBorder(javax.swing.BorderFactory.createLineBorder(new java.awt.Color(204, 204, 204)));

        jLabel5.setText("\u96fb\u8a71\u756a\u53f7");

        purchaseGroup.add(allPurchase);
        allPurchase.setSelected(true);
        allPurchase.setText("\u5168\u3066");
        allPurchase.setBorder(javax.swing.BorderFactory.createEmptyBorder(0, 0, 0, 0));
        allPurchase.setMargin(new java.awt.Insets(0, 0, 0, 0));

        jLabel2.setText("\u4ed5\u5165\u5148No.");

        supplierNoFrom.setBorder(javax.swing.BorderFactory.createLineBorder(new java.awt.Color(204, 204, 204)));

        jLabel3.setText("\uff5e");

        supplierNoTo.setBorder(javax.swing.BorderFactory.createLineBorder(new java.awt.Color(204, 204, 204)));

        javax.swing.GroupLayout jPanel1Layout = new javax.swing.GroupLayout(jPanel1);
        jPanel1.setLayout(jPanel1Layout);
        jPanel1Layout.setHorizontalGroup(
            jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(jPanel1Layout.createSequentialGroup()
                .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(jPanel1Layout.createSequentialGroup()
                        .addComponent(jLabel2)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addComponent(supplierNoFrom, javax.swing.GroupLayout.PREFERRED_SIZE, 71, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addComponent(jLabel3)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addComponent(supplierNoTo, javax.swing.GroupLayout.PREFERRED_SIZE, 71, javax.swing.GroupLayout.PREFERRED_SIZE))
                    .addGroup(jPanel1Layout.createSequentialGroup()
                        .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                                .addGroup(jPanel1Layout.createSequentialGroup()
                                    .addComponent(jLabel1, javax.swing.GroupLayout.DEFAULT_SIZE, 52, Short.MAX_VALUE)
                                    .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED))
                                .addGroup(jPanel1Layout.createSequentialGroup()
                                    .addComponent(jLabel11)
                                    .addGap(9, 9, 9)))
                            .addComponent(jLabel4)
                            .addComponent(jLabel5))
                        .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addGroup(jPanel1Layout.createSequentialGroup()
                                .addComponent(prefecture, javax.swing.GroupLayout.DEFAULT_SIZE, 80, Short.MAX_VALUE)
                                .addGap(38, 38, 38))
                            .addGroup(jPanel1Layout.createSequentialGroup()
                                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                                .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                                    .addGroup(jPanel1Layout.createSequentialGroup()
                                        .addComponent(allPurchase, javax.swing.GroupLayout.PREFERRED_SIZE, 80, javax.swing.GroupLayout.PREFERRED_SIZE)
                                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                                        .addComponent(trustPurchase, javax.swing.GroupLayout.PREFERRED_SIZE, 80, javax.swing.GroupLayout.PREFERRED_SIZE)
                                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                                        .addComponent(cashPurchase, javax.swing.GroupLayout.PREFERRED_SIZE, 80, javax.swing.GroupLayout.PREFERRED_SIZE))
                                    .addComponent(supplierName, javax.swing.GroupLayout.PREFERRED_SIZE, 185, javax.swing.GroupLayout.PREFERRED_SIZE)))
                            .addGroup(jPanel1Layout.createSequentialGroup()
                                .addComponent(phoneNumber, javax.swing.GroupLayout.PREFERRED_SIZE, 185, javax.swing.GroupLayout.PREFERRED_SIZE)
                                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, 69, javax.swing.GroupLayout.PREFERRED_SIZE)))))
                .addContainerGap())
        );

        jPanel1Layout.linkSize(javax.swing.SwingConstants.HORIZONTAL, new java.awt.Component[] {prefecture, trustPurchase});

        jPanel1Layout.setVerticalGroup(
            jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(jPanel1Layout.createSequentialGroup()
                .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(jLabel2)
                    .addComponent(supplierNoFrom, javax.swing.GroupLayout.PREFERRED_SIZE, 19, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(jLabel3)
                    .addComponent(supplierNoTo, javax.swing.GroupLayout.PREFERRED_SIZE, 19, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(jLabel1)
                    .addComponent(supplierName, javax.swing.GroupLayout.PREFERRED_SIZE, 19, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(jLabel11)
                    .addComponent(allPurchase)
                    .addComponent(trustPurchase)
                    .addComponent(cashPurchase))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(jLabel4)
                    .addComponent(prefecture, javax.swing.GroupLayout.PREFERRED_SIZE, 19, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(jLabel5)
                    .addComponent(phoneNumber, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
        );

        jPanel1Layout.linkSize(javax.swing.SwingConstants.VERTICAL, new java.awt.Component[] {phoneNumber, supplierName});

        jPanel2.setOpaque(false);
        itemClass.setBorder(javax.swing.BorderFactory.createLineBorder(new java.awt.Color(204, 204, 204)));
        itemClass.addActionListener(new java.awt.event.ActionListener()
        {
            public void actionPerformed(java.awt.event.ActionEvent evt)
            {
                itemClassActionPerformed(evt);
            }
        });

        jLabel6.setText("\u5546\u54c1");

        item.setBorder(javax.swing.BorderFactory.createLineBorder(new java.awt.Color(204, 204, 204)));

        javax.swing.GroupLayout jPanel2Layout = new javax.swing.GroupLayout(jPanel2);
        jPanel2.setLayout(jPanel2Layout);
        jPanel2Layout.setHorizontalGroup(
            jPanel2Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(jPanel2Layout.createSequentialGroup()
                .addComponent(jLabel6, javax.swing.GroupLayout.PREFERRED_SIZE, 48, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addGroup(jPanel2Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addComponent(item, 0, 220, Short.MAX_VALUE)
                    .addComponent(itemClass, 0, 220, Short.MAX_VALUE)))
        );
        jPanel2Layout.setVerticalGroup(
            jPanel2Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(jPanel2Layout.createSequentialGroup()
                .addGroup(jPanel2Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(jLabel6)
                    .addComponent(itemClass, javax.swing.GroupLayout.PREFERRED_SIZE, 19, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addComponent(item, javax.swing.GroupLayout.PREFERRED_SIZE, 19, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
        );

        supplierTable.setModel(new javax.swing.table.DefaultTableModel(
            new Object [][]
            {

            },
            new String []
            {
                "仕入先No.", "仕入先名", "仕入区分", "郵便番号", "住所", "電話番号"
            }
        )
        {
            Class[] types = new Class []
            {
                java.lang.String.class, java.lang.String.class, java.lang.String.class, java.lang.String.class, java.lang.String.class, java.lang.String.class
            };
            boolean[] canEdit = new boolean []
            {
                false, false, false, false, false, false
            };

            public Class getColumnClass(int columnIndex)
            {
                return types [columnIndex];
            }

            public boolean isCellEditable(int rowIndex, int columnIndex)
            {
                return canEdit [columnIndex];
            }
        });
        supplierTable.setSelectionForeground(new java.awt.Color(0, 0, 0));
        supplierTable.setSelectionMode(ListSelectionModel.SINGLE_SELECTION);
        supplierTable.getTableHeader().setReorderingAllowed(false);
        SwingUtil.setJTableHeaderRenderer(supplierTable, SystemInfo.getTableHeaderRenderer());
        supplierTable.setRowHeight(SystemInfo.TABLE_ROW_HEIGHT);
        SelectTableCellRenderer.setSelectTableCellRenderer(supplierTable);
        supplierTable.addMouseListener(new java.awt.event.MouseAdapter()
        {
            public void mouseClicked(java.awt.event.MouseEvent evt)
            {
                supplierTableMouseClicked(evt);
            }
        });

        jScrollPane1.setViewportView(supplierTable);

        searchButton.setIcon(SystemInfo.getImageIcon("/button/search/search_off.jpg"));
        searchButton.setBorderPainted(false);
        searchButton.setContentAreaFilled(false);
        searchButton.setPressedIcon(SystemInfo.getImageIcon("/button/search/search_on.jpg"));
        searchButton.addActionListener(new java.awt.event.ActionListener()
        {
            public void actionPerformed(java.awt.event.ActionEvent evt)
            {
                searchButtonActionPerformed(evt);
            }
        });

        selectButton.setIcon(SystemInfo.getImageIcon("/button/select/select_off.jpg"));
        selectButton.setBorderPainted(false);
        selectButton.setContentAreaFilled(false);
        selectButton.setFocusable(false);
        selectButton.setPressedIcon(SystemInfo.getImageIcon("/button/select/select_on.jpg"));
        selectButton.addActionListener(new java.awt.event.ActionListener()
        {
            public void actionPerformed(java.awt.event.ActionEvent evt)
            {
                selectButtonselectCustomer(evt);
            }
        });

        javax.swing.GroupLayout jPanel3Layout = new javax.swing.GroupLayout(jPanel3);
        jPanel3.setLayout(jPanel3Layout);
        jPanel3Layout.setHorizontalGroup(
            jPanel3Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, jPanel3Layout.createSequentialGroup()
                .addContainerGap(181, Short.MAX_VALUE)
                .addComponent(searchButton, javax.swing.GroupLayout.PREFERRED_SIZE, 92, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addComponent(selectButton, javax.swing.GroupLayout.PREFERRED_SIZE, 92, javax.swing.GroupLayout.PREFERRED_SIZE))
        );
        jPanel3Layout.setVerticalGroup(
            jPanel3Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addComponent(selectButton, javax.swing.GroupLayout.PREFERRED_SIZE, 25, javax.swing.GroupLayout.PREFERRED_SIZE)
            .addComponent(searchButton, javax.swing.GroupLayout.PREFERRED_SIZE, 25, javax.swing.GroupLayout.PREFERRED_SIZE)
        );

        backButton.setIcon(SystemInfo.getImageIcon("/button/common/close_off.jpg"));
        backButton.setBorderPainted(false);
        backButton.setContentAreaFilled(false);
        backButton.setFocusable(false);
        backButton.setPressedIcon(SystemInfo.getImageIcon("/button/common/close_on.jpg"));
        backButton.addActionListener(new java.awt.event.ActionListener()
        {
            public void actionPerformed(java.awt.event.ActionEvent evt)
            {
                backButtonbackPrevious(evt);
            }
        });

        javax.swing.GroupLayout imagePanel1Layout = new javax.swing.GroupLayout(imagePanel1);
        imagePanel1.setLayout(imagePanel1Layout);
        imagePanel1Layout.setHorizontalGroup(
            imagePanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, imagePanel1Layout.createSequentialGroup()
                .addContainerGap()
                .addGroup(imagePanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING)
                    .addComponent(jScrollPane1, javax.swing.GroupLayout.Alignment.LEADING, javax.swing.GroupLayout.DEFAULT_SIZE, 690, Short.MAX_VALUE)
                    .addGroup(imagePanel1Layout.createSequentialGroup()
                        .addComponent(jPanel1, javax.swing.GroupLayout.PREFERRED_SIZE, 311, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addGroup(imagePanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING)
                            .addGroup(imagePanel1Layout.createSequentialGroup()
                                .addComponent(jPanel2, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                                .addComponent(backButton, javax.swing.GroupLayout.PREFERRED_SIZE, 92, javax.swing.GroupLayout.PREFERRED_SIZE))
                            .addComponent(jPanel3, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))))
                .addContainerGap())
        );
        imagePanel1Layout.setVerticalGroup(
            imagePanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(imagePanel1Layout.createSequentialGroup()
                .addContainerGap()
                .addGroup(imagePanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)
                    .addGroup(imagePanel1Layout.createSequentialGroup()
                        .addGroup(imagePanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addComponent(backButton, javax.swing.GroupLayout.PREFERRED_SIZE, 25, javax.swing.GroupLayout.PREFERRED_SIZE)
                            .addComponent(jPanel2, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, 44, Short.MAX_VALUE)
                        .addComponent(jPanel3, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                    .addComponent(jPanel1, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addComponent(jScrollPane1, javax.swing.GroupLayout.PREFERRED_SIZE, 407, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
        );

        javax.swing.GroupLayout layout = new javax.swing.GroupLayout(getContentPane());
        getContentPane().setLayout(layout);
        layout.setHorizontalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addComponent(imagePanel1, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
        );
        layout.setVerticalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addComponent(imagePanel1, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
        );
        pack();
    }// </editor-fold>//GEN-END:initComponents

	private void itemClassActionPerformed(java.awt.event.ActionEvent evt)//GEN-FIRST:event_itemClassActionPerformed
	{//GEN-HEADEREND:event_itemClassActionPerformed
		this.setItem();
	}//GEN-LAST:event_itemClassActionPerformed

	private void supplierTableMouseClicked(java.awt.event.MouseEvent evt)//GEN-FIRST:event_supplierTableMouseClicked
	{//GEN-HEADEREND:event_supplierTableMouseClicked
		if(evt.getClickCount() == 2)
		{
			this.setSelectedSupplier();
			this.setVisible(false);
		}
	}//GEN-LAST:event_supplierTableMouseClicked

	private void selectButtonselectCustomer(java.awt.event.ActionEvent evt)//GEN-FIRST:event_selectButtonselectCustomer
	{//GEN-HEADEREND:event_selectButtonselectCustomer
		this.setSelectedSupplier();
		this.setVisible(false);
	}//GEN-LAST:event_selectButtonselectCustomer

	private void backButtonbackPrevious(java.awt.event.ActionEvent evt)//GEN-FIRST:event_backButtonbackPrevious
	{//GEN-HEADEREND:event_backButtonbackPrevious
		this.setVisible(false);
	}//GEN-LAST:event_backButtonbackPrevious

	private void searchButtonActionPerformed(java.awt.event.ActionEvent evt)//GEN-FIRST:event_searchButtonActionPerformed
	{//GEN-HEADEREND:event_searchButtonActionPerformed
		this.load();
	}//GEN-LAST:event_searchButtonActionPerformed
	
    // Variables declaration - do not modify//GEN-BEGIN:variables
    private javax.swing.JRadioButton allPurchase;
    private javax.swing.JButton backButton;
    private javax.swing.JRadioButton cashPurchase;
    private com.geobeck.swing.ImagePanel imagePanel1;
    private javax.swing.JComboBox item;
    private javax.swing.JComboBox itemClass;
    private javax.swing.JLabel jLabel1;
    private javax.swing.JLabel jLabel11;
    private javax.swing.JLabel jLabel2;
    private javax.swing.JLabel jLabel3;
    private javax.swing.JLabel jLabel4;
    private javax.swing.JLabel jLabel5;
    private javax.swing.JLabel jLabel6;
    private javax.swing.JPanel jPanel1;
    private javax.swing.JPanel jPanel2;
    private javax.swing.JPanel jPanel3;
    private javax.swing.JScrollPane jScrollPane1;
    private com.geobeck.swing.JFormattedTextFieldEx phoneNumber;
    private com.geobeck.sosia.pos.swing.JComboBoxLabel prefecture;
    private javax.swing.ButtonGroup purchaseGroup;
    private javax.swing.JButton searchButton;
    private javax.swing.JButton selectButton;
    private com.geobeck.swing.JFormattedTextFieldEx supplierName;
    private com.geobeck.swing.JFormattedTextFieldEx supplierNoFrom;
    private com.geobeck.swing.JFormattedTextFieldEx supplierNoTo;
    private javax.swing.JTable supplierTable;
    private javax.swing.JRadioButton trustPurchase;
    // End of variables declaration//GEN-END:variables
	
	private	SearchSupplier		ss					=	new SearchSupplier();
	private MstSupplier			selectedSupplier	=	null;
	
	private void init()
	{
		this.initPrefecture();
		this.initItemClass();
		this.initTableColumnWidth();
	}
	
	private void initPrefecture()
	{
		prefecture.addItem("");

		try
		{
			ConnectionWrapper	con	=	SystemInfo.getBaseConnection();
			
			ResultSetWrapper	rs	=	con.executeQuery("select *\n" +
					"from mst_prefecture\n" +
					"order by prefecture_code\n");
			
			while(rs.next())
			{
				prefecture.addItem(rs.getString("prefecture_name"));
			}
			
			rs.close();
		}
		catch(SQLException e)
		{
			SystemInfo.getLogger().log(Level.SEVERE, e.getLocalizedMessage(), e);
		}
	}
	
	private void initItemClass()
	{
		MstItemClasses	mics	=	new MstItemClasses();

		try
		{
			mics.loadAll(SystemInfo.getConnection());
		}
		catch(Exception e)
		{
			SystemInfo.getLogger().log(Level.SEVERE, e.getLocalizedMessage(), e);
		}
		
		for(MstItemClass mic : mics)
		{
			itemClass.addItem(mic);
		}
	}
	
	private void setItem()
	{
		item.removeAllItems();
		
		item.addItem(new MstItem());
		
		if(0 <= itemClass.getSelectedIndex())
		{
			MstItemClass	mic	=	(MstItemClass)itemClass.getSelectedItem();
			
			for(MstItem mi : mic)
			{
				item.addItem(mi);
			}
		}
	}
	
	private void initTableColumnWidth()
	{
		//列の幅を設定する。
		supplierTable.getColumnModel().getColumn(0).setPreferredWidth(60);
		supplierTable.getColumnModel().getColumn(1).setPreferredWidth(140);
		supplierTable.getColumnModel().getColumn(2).setPreferredWidth(60);
		supplierTable.getColumnModel().getColumn(3).setPreferredWidth(60);
		supplierTable.getColumnModel().getColumn(4).setPreferredWidth(170);
		supplierTable.getColumnModel().getColumn(5).setPreferredWidth(100);
	}
	
	private void load()
	{
		if(!this.checkInput())
		{
			return;
		}
		
		SwingUtil.clearTable(supplierTable);
		
		this.setCondition();
		
		ss.load();
		
		DefaultTableModel	model	=	(DefaultTableModel)supplierTable.getModel();
		
		for(MstSupplier ms : ss)
		{
			Vector<Object>	temp	=	new Vector<Object>();
			
			temp.add(ms.getSupplierNo());
			temp.add(ms.getSupplierName());
			temp.add(ms.getPurchaseDivisionName());
			temp.add(ms.getPostalCodeWithHyphen());
			temp.add(ms.getFullAddress());
			temp.add(ms.getPhoneNumber());
			
			model.addRow(temp);
		}
	}
	
	private boolean checkInput()
	{
		if(!supplierNoFrom.getText().equals("") &&
				!supplierNoTo.getText().equals(""))
		{
			if(new Integer(supplierNoTo.getText()) <
					new Integer(supplierNoFrom.getText()))
			{
				return	false;
			}
		}
		
		return	true;
	}
	
	private void setCondition()
	{
		if(supplierNoFrom.getText().equals(""))
		{
			ss.setSupplierNoFrom(null);
		}
		else
		{
			ss.setSupplierNoFrom(new Integer(supplierNoFrom.getText()));
		}
		
		if(supplierNoTo.getText().equals(""))
		{
			ss.setSupplierNoFrom(null);
		}
		else
		{
			ss.setSupplierNoFrom(new Integer(supplierNoTo.getText()));
		}
		
		ss.setSupplierName(supplierName.getText());
		
		ss.setPurchaseDivision(this.getPurchaseDivision());
		
		if(0 < prefecture.getSelectedIndex())
		{
			ss.setPrefecture(prefecture.getSelectedItem().toString());
		}
		
		if(0 < item.getSelectedIndex())
		{
			MstItem		mi	=	(MstItem)item.getSelectedItem();
			ss.setItemID(mi.getItemID());
		}
	}
	
	private Integer getPurchaseDivision()
	{
		if(trustPurchase.isSelected())
		{
			return	0;
		}
		else if(cashPurchase.isSelected())
		{
			return	1;
		}
		else
		{
			return	-1;
		}
	}

	private void setSelectedSupplier()
	{
		if(0 <= supplierTable.getSelectedRow())
		{
			selectedSupplier	=	ss.get(
					supplierTable.getSelectedRow());
		}
	}

	public MstSupplier getSelectedSupplier()
	{
		return selectedSupplier;
	}
}
